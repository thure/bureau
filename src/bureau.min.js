(function(i){var g=function(a){return"undefined"!==typeof a&&null!==a},w=g(window.Zepto),q=g(window.Modernizr),r=0,j=["Webkit","Moz","O","ms"],x=document.createElement("div"),s,t,u=!1;i.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a){void 0!==x.style[a+"TransitionProperty"]&&(u="-"+a.toLowerCase()+"-",s=a)});t=u;var d;if(q&&g(window.Modernizr.cssanimations))d=window.Modernizr.cssanimations;else{var q=document.createElement("modernizr").style,n="A"+"animationName".slice(1);a:{j=("animationName "+
j.join(n+" ")+n).split(" ");for(d in j)if(j.hasOwnProperty(d)&&(n=j[d],!~(""+n).indexOf("-")&&void 0!==q[n])){d=!0;break a}d=!1}}var y=d,v=function(a){return"[object Function]"===Object.prototype.toString.call(a)},m=function(a){return"[object String]"===Object.prototype.toString.call(a)};i.fn.bureauTotal=function(a){var g,d=0,e=i(this);if("height"===a)a={height:e.css("height"),"margin-top":e.css("margin-top"),"margin-bottom":e.css("margin-bottom"),"padding-top":e.css("padding-top"),"padding-bottom":e.css("padding-bottom"),
"border-top-width":e.css("border-top-width"),"border-bottom-width":e.css("border-bottom-width")};else if("width"===a)a={width:e.css("height"),"margin-left":e.css("margin-left"),"margin-right":e.css("margin-right"),"padding-left":e.css("padding-left"),"padding-right":e.css("padding-right"),"border-left-width":e.css("border-left-width"),"border-right-width":e.css("border-right-width")};else return d;for(g in a)a.hasOwnProperty(g)&&(d+=parseInt(a[g],10));return d};i.fn.bureau=function(a){var d=["yup",
"nope","everyYup","everyNope"],j=function(l,a,f,g){return function(){var b=0===f?"-init":"",e=f/1E3,c=i(this),h=c.bureauTotal(a)+"px",d;c.parent().hasClass("bureauWrapper")||(d=i('<div class="bureauWrapper" style="margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; overflow: hidden;"></div>'),c.wrapAll(d));d=c.parent();var p="hide"===l?"0px":h,h="show"===l?"0px":h;y?("undefined"===typeof c.data("anim-"+l+b)?(c=r,r+=1,p="@"+t+"keyframes bureauToggle"+c+" { from { max-"+
a+": "+h+"}to { max-"+a+": "+p+"}}",document.styleSheets&&document.styleSheets.length?document.styleSheets[0].insertRule(p,0):(h=document.createElement("style"),h.innerHTML=p,document.getElementsByTagName("head")[0].appendChild(h)),i(this).data("anim-"+l+b,c)):c=parseInt(c.data("anim-"+l+b),10),d.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){}).get(0).style[s+"Animation"]="bureauToggle"+c+" "+e+"s "+g+" both"):w?("show"===l&&i(this).show(),"hide"===l&&i(this).hide()):
(d.css("max-"+a,h),b={},b["max-"+a]=p,d.animate(b,f,g,function(){}))}},e=function(a,e,f){var o,b={};if(g(a.when)){if(v(a.when))o=a.when;else if(m(a.when))switch(a.when){case "checked":o=function(){return i(this).prop("checked")};break;case "empty":o=function(){return""===i(this).val()};break;default:throw Error('Bureau: Could not resolve string-condition "'+a.when+'".');}else if("[object RegExp]"===Object.prototype.toString.call(a.when))o=function(){return a.when.test(i(this).val())};else throw new TypeError('Bureau: "when" condition is the wrong type.');
var k;for(k=0;k<d.length;k+=1){var c=d[k];if(g(a[c]))if(v(a[c]))b[c]=a[c];else if(m(a[c])){var h=a[c].split(":");if(1===h.length)switch(h[0]){case "show":b[c]=function(){i(this).show()};break;case "hide":b[c]=function(){i(this).hide()};break;default:throw Error('Bureau: Could not resolve string-shortcut "'+a[c]+'".');}else if(2<h.length)b[c]=j.apply(this,h),b["init-"+c]=j.call(this,h[0],h[1],0.1,h[3]);else throw Error("Bureau: String-shortcut for animation is missing mandatory options.");}else throw new TypeError('Bureau: "'+
c+'" callback is the wrong type.');}}else throw Error('Bureau: no "when" condition to act upon.');return function(a,c){var d=o.call(f,e);f.data("previous-validation")!==d.toString()&&(f.data("previous-validation",d.toString()).trigger("bureau:change",[d]),d?"init"===c&&g(b["init-yup"])?b["init-yup"].call(e,f):g(b.yup)&&b.yup.call(e,f):"init"===c&&g(b["init-nope"])?b["init-nope"].call(e,f):g(b.nope)&&b.nope.call(e,f));d?"init"===c&&g(b["init-everyYup"])?b["init-everyYup"].call(e,f):g(b.everyYup)&&
b.everyYup.call(e,f):"init"===c&&g(b["init-everyNope"])?b["init-everyNope"].call(e,f):g(b.everyNope)&&b.everyNope.call(e,f)}};return this.each(function(){var d=i(this),g;for(g in a)if(a.hasOwnProperty(g)){var f=a[g];if(m(f.dependsOn)){var j=i(g,d),b=i(f.dependsOn,d);try{if(f.hasOwnProperty("rules")&&(Array.isArray||"[object Array]"===Object.prototype.toString.call(f.rules))){var k;for(k=0;k<f.rules.length;k+=1){var c=f.rules[k];b.on(m(c.updateOn)?c.updateOn:"change keyup",e(c,j,b))}}else b.on(m(f.updateOn)?
f.updateOn:"change keyup",e(f,j,b))}catch(h){window.console.error(h.message)}b.trigger(m(f.triggerAtStart)?f.triggerAtStart:"change",["init"])}}})}})("undefined"!==typeof window.Zepto&&null!==window.Zepto?window.Zepto:window.jQuery);
