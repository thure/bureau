(function(f){f.fn.bureau=function(k){var l=["then","else"],i=function(a){return"undefined"!==typeof a&&null!==a},m=function(a){return"[object Function]"===Object.prototype.toString.call(a)},j=function(a){return"[object String]"===Object.prototype.toString.call(a)},n=function(a,g,b){var h,d={};if(i(a.when)){if(m(a.when))h=a.when;else if(j(a.when))switch(a.when){case "checked":h=function(){return f(this).prop("checked")};break;case "empty":h=function(){return""===f(this).val()};break;default:throw Error('Bureau: Could not resolve string-condition "'+
a.when+'".');}else if("[object RegExp]"===Object.prototype.toString.call(a.when))h=function(){return a.when.test(f(this).val())};else throw new TypeError('Bureau: "when" condition is the wrong type.');var e;for(e=0;e<l.length;e+=1){var c=l[e];if(i(a[c]))if(m(a[c]))d[c]=a[c];else if(j(a[c]))switch(a[c]){case "show":d[c]=function(){f(this).show()};break;case "hide":d[c]=function(){f(this).hide()};break;default:throw Error('Bureau: Could not resolve string-shortcut "'+a[c]+'".');}else throw new TypeError('Bureau: "'+
c+'" callback is the wrong type.');}}else throw Error('Bureau: no "when" condition to act upon.');return function(){h.call(b,g)?i(d.then)&&d.then.call(g,b):i(d["else"])&&d["else"].call(g,b)}};return this.each(function(){var a=f(this),g;for(g in k)if(k.hasOwnProperty(g)){var b=k[g];if(j(b.dependsOn)){var h=f(g,a),d=f(b.dependsOn,a);try{if(b.hasOwnProperty("rules")&&(Array.isArray||"[object Array]"===Object.prototype.toString.call(b.rules))){var e;for(e=0;e<b.rules.length;e+=1){var c=b.rules[e];d.on(j(c.updateOn)?
c.updateOn:"change keyup",n(c,h,d))}}else d.on(j(b.updateOn)?b.updateOn:"change keyup",n(b,h,d))}catch(i){window.console.error(i.message)}d.trigger(j(b.triggerAtStart)?b.triggerAtStart:"change")}}})}})("undefined"!==typeof window.Zepto&&null!==window.Zepto?window.Zepto:window.jQuery);
